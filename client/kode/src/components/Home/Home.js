import React, { useEffect, useState } from "react";
import { useDispatch } from "react-redux"; // sluzi za dispatchanje akcije
import { getPosts } from "../../../src/actions/posts";
import classes from "./Home.css";
import Form from "../Form/Form";
import Posts from "../Posts/Posts";
import BcgImg from "../../bcgimg.jpg";
import Search from "../Search/Search";

const Home = () => {
  const [currentId, setCurrentId] = useState(null);
  const [search, setSearch] = useState("");
  const dispatch = useDispatch();

  useEffect(() => {
    dispatch(getPosts());
  }, [currentId, dispatch]);

  console.log(search);
  return (
    <div className={classes.App}>
      <div className={classes.container}>
        <div className={classes.container2}>
          <div className={classes.textOnPhoto}>
            <svg
              width="309"
              height="93"
              viewBox="0 0 309 93"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M66.3574 91H50.2324L15.9038 46.5303L12.3765 50.9395V91H0.0307617V2.06055H12.3765V42.562L19.1162 34.5625L47.7129 2.06055H63.5859L27.4307 41.5542L66.3574 91ZM109.441 92.6377C104.57 92.6377 100.203 92.0708 96.3398 90.937C92.5186 89.7612 89.1382 88.1445 86.1987 86.0869C83.2593 84.0293 80.7397 81.5728 78.6401 78.7173C76.5825 75.8618 74.8818 72.7334 73.5381 69.332C72.2363 65.9307 71.2705 62.3193 70.6406 58.498C70.0527 54.6768 69.7588 50.7505 69.7588 46.7192C69.7588 42.604 70.0737 38.5938 70.7036 34.6885C71.3755 30.7832 72.3833 27.1089 73.7271 23.6655C75.1128 20.2222 76.8555 17.0728 78.9551 14.2173C81.0967 11.3198 83.6372 8.84229 86.5767 6.78467C89.5161 4.68506 92.8755 3.06836 96.6548 1.93457C100.476 0.758789 104.738 0.170898 109.441 0.170898C114.145 0.170898 118.386 0.758789 122.165 1.93457C125.986 3.06836 129.367 4.68506 132.306 6.78467C135.246 8.84229 137.765 11.3198 139.865 14.2173C142.006 17.0728 143.749 20.2222 145.093 23.6655C146.437 27.1089 147.423 30.7832 148.053 34.6885C148.725 38.5938 149.061 42.604 149.061 46.7192C149.061 50.7505 148.746 54.6768 148.116 58.498C147.528 62.3193 146.583 65.9307 145.282 69.332C143.98 72.7334 142.279 75.8618 140.18 78.7173C138.122 81.5728 135.624 84.0293 132.684 86.0869C129.745 88.1445 126.343 89.7612 122.48 90.937C118.659 92.0708 114.312 92.6377 109.441 92.6377ZM109.441 81.6147C114.648 81.6147 118.953 80.6699 122.354 78.7803C125.797 76.8906 128.527 74.3291 130.542 71.0957C132.558 67.8623 133.965 64.125 134.763 59.8838C135.603 55.6426 136.022 51.1494 136.022 46.4043C136.022 41.4912 135.582 36.8931 134.7 32.6099C133.86 28.3267 132.411 24.5894 130.354 21.3979C128.296 18.2065 125.566 15.708 122.165 13.9023C118.764 12.0547 114.522 11.1309 109.441 11.1309C104.36 11.1309 100.119 12.0547 96.7178 13.9023C93.3164 15.708 90.5869 18.2065 88.5293 21.3979C86.4717 24.5894 85.002 28.3267 84.1201 32.6099C83.2383 36.8931 82.7974 41.4912 82.7974 46.4043C82.7974 51.1494 83.1963 55.6426 83.9941 59.8838C84.834 64.125 86.2617 67.8623 88.2773 71.0957C90.293 74.3291 93.0015 76.8906 96.4028 78.7803C99.8462 80.6699 104.192 81.6147 109.441 81.6147ZM237.371 46.5303C237.371 50.8135 236.993 54.7607 236.237 58.3721C235.523 61.9414 234.557 65.1958 233.339 68.1353C232.122 71.0747 230.715 73.6992 229.119 76.0088C227.565 78.2764 225.907 80.229 224.143 81.8667C222.127 83.6304 219.902 85.1001 217.466 86.2759C215.073 87.4517 212.511 88.3965 209.782 89.1104C207.094 89.7822 204.239 90.2651 201.215 90.5591C198.234 90.853 195.147 91 191.956 91H168.146V2.06055H193.468C196.491 2.06055 199.494 2.22852 202.475 2.56445C205.457 2.8584 208.354 3.42529 211.167 4.26514C214.023 5.10498 216.731 6.25977 219.293 7.72949C221.896 9.19922 224.29 11.1099 226.474 13.4614C230.085 17.6606 232.793 22.6157 234.599 28.3267C236.447 33.9956 237.371 40.0635 237.371 46.5303ZM224.206 46.9712C224.206 45.2915 224.101 43.3179 223.891 41.0503C223.681 38.7827 223.282 36.4521 222.694 34.0586C222.106 31.665 221.267 29.2925 220.175 26.9409C219.125 24.5894 217.76 22.4688 216.081 20.5791C213.435 17.6816 210.286 15.687 206.632 14.5952C203.021 13.4614 198.696 12.8945 193.657 12.8945H180.429V80.229H191.074C193.384 80.229 195.63 80.103 197.814 79.8511C200.04 79.5991 202.139 79.2212 204.113 78.7173C206.086 78.1714 207.934 77.4785 209.656 76.6387C211.419 75.7988 212.973 74.791 214.317 73.6152C216.291 71.8096 217.907 69.7729 219.167 67.5054C220.469 65.2378 221.477 62.9072 222.19 60.5137C222.946 58.0781 223.471 55.7056 223.765 53.396C224.059 51.0444 224.206 48.9028 224.206 46.9712ZM308.421 91H256.33V2.06055H307.854V13.0835H268.676V39.4756H305.65V50.4985H268.676V79.7251H308.421V91Z"
                fill="white"
              />
            </svg>

            <div>start your programming journey</div>
          </div>
          <Search setSearch={setSearch} />
        </div>
        <img src={BcgImg} alt="Logo" className={classes.homeImage} />
      </div>
      <Posts setCurrentId={setCurrentId} search={search} />
      <Form currentId={currentId} setCurrentId={setCurrentId} />
    </div>
  );
};

export default Home;
